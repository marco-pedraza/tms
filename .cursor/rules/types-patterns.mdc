---
description: Patterns for type definitions in Encore applications
globs: ['apps/server/*/*/*.types.ts']
alwaysApply: false
---
# Types Patterns

## Rules for Type Definitions

1. Type structure should follow:

   - Base entity interfaces (e.g., `Country`, `State`)
   - Creation payloads (e.g., `CreateCountryPayload`, `CreateStatePayload`)
   - Update payloads (e.g., `UpdateCountryPayload`, `UpdateStatePayload`)
   - List responses (e.g., `Countries`, `States`)

2. Use descriptive JSDoc comments for all types and properties

3. Include validation decorators from Encore for input types

4. Keep types in `*.types.ts` files

5. Use consistent naming patterns across all features

## Type Definitions Example

```typescript
// API types
import { MinLen, MatchesRegexp } from 'encore.dev/validate';

/**
 * Base interface representing a country entity
 */
export interface Country {
  /** Unique identifier for the country */
  id: number;

  /** Name of the country */
  name: string;

  /** Whether the country is currently active in the system */
  active: boolean;

  /** ISO country code (e.g., "US", "CA", "MX") */
  code: string;

  /** Timestamp when the country record was created */
  createdAt: Date | null;

  /** Timestamp when the country record was last updated */
  updatedAt: Date | null;
}

/**
 * Input for creating a new country
 */
export interface CreateCountryPayload {
  /**
   * Name of the country
   * Must have at least 1 non-whitespace character
   */
  name: string & MinLen<1> & MatchesRegexp<'.*\\S.*'>;

  /**
   * ISO country code (e.g., "US", "CA", "MX")
   * Must have at least 1 non-whitespace character
   */
  code: string & MinLen<1> & MatchesRegexp<'.*\\S.*'>;

  /**
   * Whether the country is active
   * @default true
   */
  active?: boolean;
}

/**
 * Input for updating a country
 */
export interface UpdateCountryPayload {
  /**
   * Name of the country
   * Must have at least 1 non-whitespace character
   */
  name?: string & MinLen<1> & MatchesRegexp<'.*\\S.*'>;

  /**
   * ISO country code (e.g., "US", "CA", "MX")
   * Must have at least 1 non-whitespace character
   */
  code?: string & MinLen<1> & MatchesRegexp<'.*\\S.*'>;

  /**
   * Whether the country is active
   */
  active?: boolean;
}

/**
 * Response type for the list countries endpoint
 */
export interface Countries {
  /** List of countries */
  countries: Country[];
}
```

## Best Practices

- Use interfaces for objects
- Use types for unions, intersections, or utility types
- Include JSDoc comments for all types and properties
- Apply validation decorators for API inputs
- Maintain consistent naming conventions
- Keep types focused and specific
- Use TypeScript features appropriately
- Export all types that might be reused elsewhere
- Group related types together
- Follow a consistent structure across all features
